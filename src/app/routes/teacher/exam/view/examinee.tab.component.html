<nz-card>
  <div style="margin-bottom: 1em;">
    <button nz-button nzType="primary" (click)="addExaminees()">添加学生</button>
    <button nz-button [nzType]="'primary'" nz-popconfirm nzPopconfirmTitle="确定清空所有学生么?" (nzOnConfirm)="removeAllExaminees()">
      <span>清空学生</span>
    </button>
  </div>
  <nz-table *ngIf="!loading" #statsTable [nzLoading]="loading" [nzData]="examineeStats"
            [nzFrontPagination]="true" nzSize="small" [nzBordered]="true">
    <thead>
    <tr>
      <th rowSpan="3">学号/用户名</th>
      <th rowspan="3" nzWidth="200px">全名</th>
      <th [colSpan]="_exam.hostsCount">登陆情况</th>
    </tr>
    <tr>
      <th *ngFor="let expr of _exam.exprs;let i = index"
          [colSpan]="expr.hostCount">
        实验{{i + 1}}
      </th>
    </tr>
    <tr>
      <ng-container *ngFor="let expr of _exam.exprs">
        <th *ngFor="let hostId of expr.hostIds" style="width: 80px">Host{{hostId + 1}}</th>
      </ng-container>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let examineeStat of statsTable.data">
      <td>{{ examineeStat.user.username }}</td>
      <td>{{ examineeStat.user.fullName }}</td>
      <td *ngFor="let hostStat of examineeStat.hosts.flat()">
        <nz-tag [nzColor]="hostStat ? 'success' : 'magenta'">
          {{hostStat ? '已' : '未'}}连接
        </nz-tag>
      </td>
    </tr>
    </tbody>
  </nz-table>
</nz-card>
